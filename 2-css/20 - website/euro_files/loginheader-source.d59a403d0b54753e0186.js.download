(window.d3WebpackJsonp=window.d3WebpackJsonp||[]).push([[87],{193:function(e,t,n){"use strict";n.d(t,"a",(function(){return v})),n.d(t,"b",(function(){return f}));var r=n(160),i=n.n(r),a=n(2),o=n.n(a),u=n(14),s=n.n(u),c=n(19),l=n.n(c),d=n(104),h=n.n(d);function v(e,t,n){return n&&h()(window,n)?l.a.resolve(h()(window,n)):t&&document.getElementById(t)?n?f(n):l.a.resolve():new l.a((function(r,i){var a=document.createElement("script");a.type="text/javascript",a.id=t||"",a.onload=s()(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return",r());case 2:return e.next=4,f(n);case 4:t=e.sent,r(t);case 6:case"end":return e.stop()}}),e)}))),a.onerror=i,a.async=!0,a.src=e,document.head.appendChild(a)}))}function f(e){return new l.a((function(t){if(h()(window,e))return t(h()(window,e));var n=i()((function(){h()(window,e)&&(clearInterval(n),t(h()(window,e)))}),2e3)}))}},376:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return F}));var r=n(88),i=n.n(r),a=n(89),o=n.n(a),u=n(59),s=n.n(u),c=n(4),l=n.n(c),d=n(60),h=n.n(d),v=n(18),f=n.n(v),g=n(61),p=n.n(g),w=n(38),y=n.n(w),k=n(2),m=n.n(k),b=n(14),L=n.n(b),E=n(11),C=n.n(E),_=n(5),S=n.n(_),R=n(8),D=n.n(R),x=n(79),I=n(87),T=n(23);function O(e,t){var n=y()(e);if(p.a){var r=p()(e);t&&(r=f()(r).call(r,(function(t){return h()(e,t).enumerable}))),n.push.apply(n,r)}return n}var F=function(){function e(t,n){S()(this,e);this.opt=function(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)l()(n=O(Object(r),!0)).call(n,(function(t){C()(e,t,r[t])}));else if(s.a)o()(e,s()(r));else{var a;l()(a=O(Object(r))).call(a,(function(t){i()(e,t,h()(r,t))}))}}return e}({},{},{},n),this.win=window,this.dom=t.get(0),this.$dropdown=$(".dropdown-menu.logged-in-dropdown",t),this.openLogin=this.dom.querySelector(".js-open-login"),this.loginName=this.dom.querySelector(".js-login-name")}var t;return D()(e,[{key:"init",value:(t=L()(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.d.waitIdpReady();case 2:if(T.a.on("userLogged",this.init,this),this.dom.classList.remove("hidden"),x.a.logged){e.next=10;break}return this.openLogin.classList.remove("hidden"),this.loginName.classList.add("hidden"),this.dom.classList.contains("open")&&this.$dropdown.dropdown("toggle"),this.openLogin.onclick=function(e){return e.preventDefault(),T.a.dispatch("show-login",I.b.HEADER),!1},e.abrupt("return");case 10:this.openLogin.classList.add("hidden"),this.loginName.classList.remove("hidden"),this.loginName.querySelector(".js-uefa-username").innerHTML=this.username,this.dom.querySelector(".js-logged-profile").onclick=function(e){return e.preventDefault(),I.d.idp.showProfile({modal:!0}),!1},this.dom.querySelector(".js-logged-logout").onclick=function(e){return e.preventDefault(),I.d.idp.logout(),!1};case 16:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"username",get:function(){var e="";return x.a.Data&&(e=x.a.Data.profile.nickname||x.a.Data.profile.firstName),e&&e.length>24&&(e="".concat(e.substring(0,24),"...")),e}}]),e}()},78:function(e,t,n){"use strict";n.d(t,"a",(function(){return M}));var r=n(88),i=n.n(r),a=n(89),o=n.n(a),u=n(59),s=n.n(u),c=n(4),l=n.n(c),d=n(60),h=n.n(d),v=n(61),f=n.n(v),g=n(38),p=n.n(g),w=n(13),y=n.n(w),k=n(11),m=n.n(k),b=n(18),L=n.n(b),E=n(359),C=n.n(E),_=n(39),S=n.n(_),R=n(5),D=n.n(R),x=n(8),I=n.n(x),T=n(79);function O(e,t){var n=p()(e);if(f.a){var r=f()(e);t&&(r=L()(r).call(r,(function(t){return h()(e,t).enumerable}))),n.push.apply(n,r)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)l()(n=O(Object(r),!0)).call(n,(function(t){m()(e,t,r[t])}));else if(s.a)o()(e,s()(r));else{var a;l()(a=O(Object(r))).call(a,(function(t){i()(e,t,h()(r,t))}))}}return e}var M=function(){function e(){D()(this,e)}return I()(e,null,[{key:"_push",value:function(e){e&&(window.dataLayer=window.dataLayer||[],window.dataLayer.push(e))}},{key:"getFromDataLayer",value:function(e){var t;if(!window.dataLayer||!window.dataLayer.length)return"";var n=S()(t=window.dataLayer).call(t,(function(t){return t.hasOwnProperty(e)}));return n?n[e]:""}},{key:"copyPageMeta",value:function(){var e;return window.dataLayer&&window.dataLayer.length?C.a.apply(null,L()(e=window.dataLayer).call(e,(function(e){return"Page Meta"===e.event}))):""}},{key:"gtmSponsorImpression",value:function(e){this._push({event:"Sponsor View",ecommerce:{promoView:{promotions:e}}})}},{key:"gtmSponsorClick",value:function(e){this._push({event:"Sponsor Click",ecommerce:{promoClick:{promotions:[e]}}})}},{key:"gtmCardImpression",value:function(e){this._push({event:"Card Impression",ecommerce:{impressions:e}})}},{key:"gtmCardClick",value:function(e,t){this._push({event:"Card Click",ecommerce:{click:{actionField:{list:e},products:[t]}}})}},{key:"event",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this._push(F({event:"gaEvent",eventCategory:e,eventAction:t,eventLabel:n},r))}},{key:"share",value:function(e,t){this.event("Social Media Activity","".concat(e," Share"),t)}},{key:"addPageMeta",value:function(e){window.thirdParties||this._push(F({event:"Page Meta"},e))}},{key:"addVirtualPage",value:function(e){this._push(F({event:"virtPath"},e))}},{key:"_getLoginData",value:function(){var e={userLoginStatus:!!T.a.logged};return T.a.logged&&(e=F({},e,{userID:T.a.userId,userNewsletterSubscriber:T.a.getIsSubscribed(),userTeam:T.a.favTeam||"",userClub:T.a.favClub||""})),e}},{key:"setLoginStatus",value:function(){var e=this._getLoginData();this.addPageMeta(e)}},{key:"login",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Form",t=this._getLoginData();this.addPageMeta(t),this.event("User Login",e,"",t)}},{key:"setUserPreferences",value:function(e,t,n,r){this.addPageMeta(r),n&&this.event(e,t,n,r)}},{key:"gtmCtaClick",value:function(e){var t,n=y()(t="".concat(this.getFromDataLayer("pageType"),"-")).call(t,this.getFromDataLayer("pageSubType")),r=F({},JSON.parse(e.dataset.tracking),{brand:this.getFromDataLayer("competition")});this._push({event:"CTA Click",ecommerce:{click:{actionField:{list:n},products:[r]}}})}}]),e}()},79:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r=n(118),i=n.n(r),a=n(19),o=n.n(a),u=n(2),s=n.n(u),c=n(14),l=n.n(c),d=n(38),h=n.n(d),v=n(37),f=n.n(v),g=n(5),p=n.n(g),w=n(8),y=n.n(w),k=n(87),m=function(){function e(){p()(this,e)}var t,n;return y()(e,null,[{key:"isLogged",value:function(){var e;return!!(null===(e=k.d.idp)||void 0===e?void 0:e.isLogged())}},{key:"getIsSubscribed",value:function(e){var t,n,r,i=this;return!!this.newsletters&&(e?!!(null===(t=this.newsletters[e])||void 0===t?void 0:null===(n=t.email)||void 0===n?void 0:n.isSubscribed):f()(r=h()(this.newsletters)).call(r,(function(e){var t,n;return!!(null===(t=i.newsletters[e])||void 0===t?void 0:null===(n=t.email)||void 0===n?void 0:n.isSubscribed)})))}},{key:"getFavouriteClub",value:(n=l()(s.a.mark((function e(t,n){var r,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,k.d.waitIdpReady();case 4:if(r=e.sent,this.logged){e.next=7;break}return e.abrupt("return");case 7:if(e.t0=r.getFavouriteClub,!e.t0){e.next=12;break}return e.next=11,r.getFavouriteClub(t);case 11:e.t0=e.sent;case 12:if((i=e.t0)||!n){e.next=21;break}if(i=this.favClub,f()(n).call(n,(function(e){return e.id===i}))){e.next=17;break}return e.abrupt("return");case 17:if(e.t1=i,!e.t1){e.next=21;break}return e.next=21,this.setFavouriteClub(t,i);case 21:return e.abrupt("return",i);case 22:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"setFavouriteClub",value:(t=l()(s.a.mark((function e(t,n){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.d.waitIdpReady();case 2:if(r=e.sent,this.logged){e.next=5;break}return e.abrupt("return");case 5:return e.abrupt("return",r.setFavouriteClub&&r.setFavouriteClub(t,n));case 6:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"removeFavouriteClub",value:function(e){return this.setFavouriteClub(e,null)}},{key:"logged",get:function(){return this.isLogged()}},{key:"Data",get:function(){return this.logged?k.d.user:null}},{key:"_token",get:function(){return window.gigya?new o.a((function(e){window.gigya.accounts.getJWT({callback:function(t){return e(t.id_token)}})})):null}},{key:"userId",get:function(){return this.Data?this.Data.UID:null}},{key:"userToken",get:function(){var e=this;return l()(s.a.mark((function t(){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.Data){t.next=2;break}return t.abrupt("return",null);case 2:return n=e.Data.originalUser,t.next=5,e._token;case 5:return n.token=t.sent,t.abrupt("return",i()(n));case 7:case"end":return t.stop()}}),t)})))()}},{key:"newsletters",get:function(){var e,t;return null===(e=k.d.user)||void 0===e?void 0:null===(t=e.subscriptions)||void 0===t?void 0:t.newsletters}},{key:"favourites",get:function(){var e,t;return(null===(e=this.Data)||void 0===e?void 0:null===(t=e.data)||void 0===t?void 0:t.favourites)||{}}},{key:"favTeam",get:function(){return this.favourites.nationalTeam}},{key:"favClub",get:function(){return this.favourites.club}},{key:"followedTeams",get:function(){return(this.favourites.nationalTeamsFollowed||"").split(",")}},{key:"followedClubs",get:function(){return(this.favourites.clubsFollowed||"").split(",")}}]),e}()},87:function(e,t,n){"use strict";n.d(t,"c",(function(){return _})),n.d(t,"b",(function(){return S})),n.d(t,"a",(function(){return R}));var r=n(19),i=n.n(r),a=n(13),o=n.n(a),u=n(2),s=n.n(u),c=n(14),l=n.n(c),d=n(5),h=n.n(d),v=n(8),f=n.n(v),g=n(11),p=n.n(g),w=n(198),y=n.n(w),k=n(358),m=n.n(k),b=n(23),L=n(78),E=n(193),C=n(1),_=y()({LOGIN:"login",REGISTER:"register",LOGOUT:"logout",USERCHANGE:"user-change",ERROR:"error",REQUESTCLOSE:"request-close"}),S=y()({HEADER:"Header",CONTENT:"Content Section"}),R=function(){function e(){var t=this;h()(this,e),p()(this,"showSocialRegister",(function(e,n){return t.idp.showSocialRegister({containerID:n}).on("ready",(function(){return t._trackModal("Registration",e)}))})),p()(this,"showLogin",(function(e,n){return t.idp.showLogin({containerID:n}).on("ready",(function(){return t._trackModal("Login",e)}))})),p()(this,"showRegister",(function(e,n){return t.idp.showRegister({containerID:n}).on("ready",(function(){return t._trackModal("Registration",e)}))})),p()(this,"_closeModal",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};b.a.dispatch("loginModalClosed",e)})),p()(this,"_login",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};b.a.dispatch("userLogged",_.LOGIN,e.user)})),p()(this,"_register",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};b.a.dispatch("userLogged",_.REGISTER,e.user)})),p()(this,"_logout",(function(){t.user=null,b.a.dispatch("userLogged",_.LOGOUT,null)})),p()(this,"_updateUser",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};m()(t.user,e.user)||(t.user=e.user,b.a.dispatch("userLogged",_.USERCHANGE,e.user),L.a.setLoginStatus())})),p()(this,"_trackModal",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:S.CONTENT;return L.a.event("Gigya","Gigya Form Loaded - ".concat(e),t)}))}var t;return f()(e,[{key:"init",value:(t=l()(s.a.mark((function e(t){var n,r=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:C.p,e.next=3,Object(E.b)("IdpManager");case 3:return this.idp=e.sent,this._attachEventEmitter(),t&&!this.inited&&this.idp.init({apiKey:t,locale:n}),e.next=8,this.idp.onReady();case 8:this.inited=!0;case 9:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"_attachEventEmitter",value:function(){this._attachEvent(_.LOGIN,this._login),this._attachEvent(_.REGISTER,this._register),this._attachEvent(_.LOGOUT,this._logout),this._attachEvent(_.USERCHANGE,this._updateUser),this._attachEvent(_.ERROR,C.f),this._attachEvent(_.REQUESTCLOSE,this._closeModal),b.a.on("show-social-register",this.showSocialRegister),b.a.on("show-login",this.showLogin),b.a.on("show-register",this.showRegister)}},{key:"_attachEvent",value:function(e,t){this.eventEmitter.on(e,(function(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];C.f.apply(void 0,o()(e=["Login event"]).call(e,r)),t.apply(void 0,r)}))}},{key:"waitIdpReady",value:function(){var e=this;return new i.a(function(){var t=l()(s.a.mark((function t(n){var r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.inited){t.next=3;break}return n(e.idp),t.abrupt("return");case 3:return t.next=5,Object(E.b)("IdpManager");case 5:return r=t.sent,t.next=8,r.onReady();case 8:n(r);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"eventEmitter",get:function(){return this.idp.getEventEmitter()}}],[{key:"getInstance",value:function(t){return t.D3=t.D3||{},t.D3.idpHandler||(t.D3.idpHandler=new e,t.D3.idpHandler.init(t.idpApiKey)),t.D3.idpHandler}}]),e}(),D=R.getInstance(window);t.d=D}}]);
//# sourceMappingURL=loginheader-source.d59a403d0b54753e0186.js.map